



# #1 NoSQL 개념

## NoSQL 개념

- 데이터가 기하급수적으로 늘어남에 따라 기존 RDB의 저장 및 관리 기술 만으로 이를 처리하게 많은 부담을 느끼고 있음
- 2000년 초반에 새로운 데이터 저장관리 기술이 등장하기 시작했는데 이를 NoSQL이라고 함
- 기존 RDB는 클라이언트/서버 플랫폼을 기반으로 한다면 NoSQL은 클라우드 컴퓨팅과 클라이언트/서버 플랫폼 모두를 기반으로 한다는 점이 가장 큰 차이임
- 기존 SQL 기능 뿐 아니라 SQL이 할 수 없는 영역의 기술도 제공하는 대체기술 또는 보완기술이다 라는 의미로 이해하는것이 올바른 해석임



**RDB에 대비한 NoSQL 장단점**

1. **클라우드 컴퓨팅 환경에 적합함**
   - 최근 플랫폼은 데이터 공유 및 시스템 운용의 효율성 향상을 위해 클라우드 컴퓨팅 환경이 적극적으로 도입되고 있음
   - 그러나 데이터 관리 기술은 여전히 RDB로 구축 운영하다 보니 비용 및 성능 지연문제와 같은 다양한 문제점에 부딪히게 됨
   - 최적화된 새로운 저장 관리 기술이 바로 NoSQL
   - RDB는 분산된 서버만큼의 라이센스를 지불해야하지만 NoSQL은 대부분 오픈소스와 엔터프라이즈 라이센스를 두개 동시에 제공함
2. **유연한 데이터 모델임**
   - 기존 RDB는 DB분석, 설계, 구축, 물리 모델링, 논리 모델링, 정규화 등등 매우 많은 시간과 비용이 발생함 이를
   - NoSQL은 비정형 데이터를 다루기때문에 RDB에서 사용하는 데이터의 타입이나 제약조건에 해당하는 비용을 감소시킬 수 있음
   - 물론 비정형 구조도 이를 분석하고 설계하는 단계는 필요하지만 RDB의 정형구조처럼 까다롭지는 않음
3. **빅데이터 처리에 효과적임**
   - 빅데이터 환경에서 빠른 쓰기/읽기 작업은 반드시 필요함 그러나 기존 RDB로는 실현 불가능
   - NOSQL은 2000년대 초반에 개발되면서 빠른 성능이 보장될 수 있도록 설계됨 NoSQL을 잘 활용한다면 최소 3배 이상의 성능을 기대할 수 있음

## NoSQL 종류

### NoSQL 제품

- RDB에는 오라클, MySQL, DB2 등등 모두 관계형 데이터 저장 구조를 사용함
- NoSQL은 MongoDB, Redis, Cassandra 등등이 있지만 모두 같은 데이터 저장 구조를 사용하지 않음
- NoSQL은 키-밸류 DB, 컬럼-패밀리 DB, 도큐먼트 DB, 그래프 DB와 같이 크게 4가지 유형의 데이터 구조를 제공함
- Redis는 키-밸류, MongoDB는 도큐먼트 DB 유형의 제품이라고 설명할 수 있음
- 이렇게 4가지로 분류하는 이유는 데이터의 유용성, 일관성, 지속성을 고려한 결과임

### 빅데이터 데이터 모델링을 위한 가이드라인

1. **초당 5만건 이상의 데이터가 발생하는가?**
   - 새롭게 구축하는 시스템이 초당 5~10만 건의 데이터가 발생한다면 기존 RDB로는 처리 불가함 이때는 이런 데이터를 고려할 필요도 없었음
2. **트랜잭션 제어가 필요한가?**
   - RDB에서는 Commit 또는 Rollback을 통해 트랜잭션을 제어함 
   - 기본적으로 Hadoop Eco System은 파일 시스템을 기반으로 하기 때문에 사용자가 직접 트랜잭션을 제어할 수 없음
   - 트랜잭션 제어가 필요한 환경이면 NoSQL 제품을 선택해야함
3. **데이터 무결성이 요구되는가?**
   - RDB에는 다양한 제약조건이 존재함 <- 성능 지연문제
   - 이런 무결성이 필요하지 않다면 키-밸류 또는 컬럼-패밀리 DB를 선택하는게 바람직 함
   - 도큐먼트 DB는 무결성을 지원함 (안하는 것도 있음)
4.  **수평적 DataSet인가 ?**
   - RDB 테이블 구조를 일반적으로 2차원 수평적 데이터 구조라고 함
   - 이런 수평적 데이터셋 구조로 저장 관리해야한다면 도큐먼트 DB를 선택해야 함
5. **계층형 데이터인가?**
   - 계층형 구조는 도큐먼트DB로도 충분히 저장 관리할 수 있음
   - 계층 Depth가 10~20레벨인 경우 선택적으로 그래프 DB 사용을 권장함



## 키-밸류 DB 활용

### 장점

**Redis Server의 기술적 주요 특징**

1. **Redis DB는 인-메모리 기반의 데이터 저장 구조임**
   - 기존 RDB는 파일 기반의 데이터 저장 구조이고 Redis는 순수 인메모리 기반 데이터 저장 구조임
   - 어떠한 설정이 없는 이상 모든 데이터는 메모리상에서만 존재함
   - 메모리를 사용하기때문에 데이터 유실, 메인 DB로 사용하는것은 한계가 있음
2. **키 밸류 데이터구조는 하나의 Key와 데이터 값으로 구성됨**
   - Redis에서 데이터 저장 구조를 테이블이라고 함
   - Redis에서도 인덱스 개념이 있지만 RDB의 인덱스와 조금 다르기때문에 한계가 있음
   - RDB의 데이터 구조를 그대로 매핑해서 사용할 수는 없고 데이터의 일부를 잠시 보관하거나 또는 가공 처리된 상태로 데이터를 임시 보관할 수 있음
3. **가공처리가 요구되는 비지니스 환경에서 적합함**
   - Redis나 Memcached는 메인 DB로 선택된 제품들은 파일 기반의 저장 구조이다 보니 디스크 IO문제로 인해 발생하는 성능 지연 문제를 해소하기 위해 키-밸류 DB를 보조로 사용하는 것임
   - 데이터의 가공처리, 통계 분석, 데이터 캐싱, 메시지 큐 등의 용도로 사용 가능

### 활용 영역

1. **실시간 분석 영역**
   - Redis는 실시간 가공 처리 및 분석이 요구되는 환경에서 장점이 가장 드러남
   - 메인 DB에느 ㄴ현재 시점 또는 과거 시점 데이터를 저장하고 필요에 따라 데이터를 읽은 다음 가공처리 및 분석 작업은 Redis 서버에서 수행하게 한 뒤 메모리에 저장하고 사용자에게 그 데이터를 제공
2. **IOT 영역**
   - NoSQL 기술 중 인메모리 기반의 Redis는 다른 도큐먼트DB, 컬럼-패밀리DB, 그래프DB와 비교했을때 매우 경량 이고 IOT와 쉽게 연결 가능하기때문에 매우 적합함
3. **계측 정보수집 영역**
   - 기존에 온도, 습도, 조도, 위치정보 등의 데이터의 수집 및 활용에 한계가 있었으나 Redis서버는 이런 데이터를 쉽고 빠르게 저장하고 가공할 수 있음
4. **개인화 정보 관리 영역**
   - 웹사이트에서 사용자 개인의 특성과 기호에 맞게 페이지 화면을 편집해서 볼 수 있듯이 Redis 에 저장되어 있는 데이터를 사용자의 필요에 따라 쉽게 가공 처리하여 편집이 요구되는 비지니스 환경에 활용 가능
5. **전자 상거래 비지니스 영역**
   - 기존 비지니스에 사용하는 RDB역할을 적용시킬 수 있지만 과거 시점의 데이터를 지속적으로 저장하는 것은 한계가 있고 시스템 크래시에 장애가 일어나므로 분산 복제 시스템을 구성해야 함

## NoSQL 선정 방법

1. **Simple API를 지원하는가?**
   - 오픈소스이기때문에 잘 안되는 부분이 있을 수도 있음 충분한 고려가 필요함
2. **Easy Distributed 기술을 제공하는가?**
   - 샤딩 또는 파티셔닝에 대한 기술이 제공되는지에 대한 검토가 필요함
3. **Easy Replication이 지원되는가?**
   - 데이터 유실 방지를 위한 복제 시스템을 제공하는지에 대한 검토 필요
4. **스케일 아웃이 가능한가?**
   - 기존 RDB는 라이센스 문제때문에 스케일아웃에 폐쇄적이였으나 NoSQL은 오픈소스가 많기때문에 스케일아웃에 개방적임
5. **유지보수 비용이 저렴한가?**
6. **비정형 데이터 구조를 지원하고 트랜잭션 제어가 가능한가?**
   - 대부분의 NoSQL은 Auto-Commit을 기본적으로 제공하지만 몇몇 제품은 사용자가 트랜잭션을 직접 제어할 수 있음
   - 트랜잭션 제어가 필요하면 반드시 고려해야함
7. **오픈소스인가?**









