# 예제

https://github.com/Jpub/SpringInAction5





# #1 스프링 기초 

## 1.1 스프링이란

- 대부분의 애플리케이션은 애플리케이션 전체 기능 중 일부를 담당하는 많은 컴포넌트로 구성되며 각 컴포넌트는 다른 애플리케이션 구성 요소와 협력해서 작업을 처리함
- 스프링은 스프링 애플리케이션 컨텍스트라는 컨테이너를 제공하는데 여기서 컴포넌트들을 생성하고 관리함 (bean) bean은 각 각 컴포넌트가 됨
- 빈의 상호 연결은 의존성 주입이라고 알려진 패턴을 기반으로 수행됨

## 1.2 스프링 애플리케이션 초기 설정하기

- 스타터 의존성의 장점 세가지
  - 우리가 필요ㅗ로 하는 모든 라이브러리의 의존성을 선언하지 않아도 되므로 빌드 파일이 훨씬 작아지고 관리하기 쉬워짐
  - 라이브러리 이름이 아닌 기능의 관점으로 의존성을 생각할 수 있음 따라서 만일 웹 애플리케이션을 개발한다면 웹 애플리케이션을 작성할 수 있게 라이브러리들을 일일이 지정하느 ㄴ대신에 여기처럼 웹 스타터 의존성만 추가하면 됨
  - 버전도 알아서 맞춰줌
- @SpringBootApplication은 @SpringBootConfiguration, @EnableAutoConfiguration, @ComponentScan 총 세개로 이루어진 애너테이션

## 1.3 스프링 애플리케이션 작성하기

### 웹 요청 처리하기

### 뷰 정의하기

###  컨트롤러 테스트하기

- MockMVC 테스트할때 클래스레벨에 @WebMvcTest({controller.claass}) 지정하면 스프링 MVC 애플리케이션의 형태로 테스트가 실행됨

```javascript
@RunWith(SpringRunner.class)
@WebMvcTest(HomeController.class)    // HomeController의 웹 페이지 테스트
public class HomeControllerTest {

  @Autowired
  private MockMvc mockMvc;    // MockMvc를 주입한다

  @Test
  public void testHomePage() throws Exception {
    mockMvc.perform(get("/"))      // GET /를 수행한다

      .andExpect(status().isOk())     // HTTP 200이 되어야 한다

      .andExpect(view().name("home"))  // home 뷰가 있어야 한다

      .andExpect(content().string(       // 콘텐츠에 Welcome to...가 포함되어야 한다
          containsString("Welcome to...")));
  }
}

```

### 애플리케이션 빌드하고 실행하기

### 스프링 부트 DevTools 알아보기

- 코드가 변경될 때 자동으로 애플리케이션을 다시 시작시킨다.
- 브라우저로 전송되는 리소스가 변경될때 자동으로 브라우저를 새로고침한다
- 템플릿 캐시를 자동으로 비활성화 한다
- 만일 h2데이터베이스가 사용중이라면 자동으로 h2 콘솔을 활성화한다.

<br>

- 템플릿 엔진에서는 템플릿 파싱 결과를 캐시에 저장하기때문에 개발단계에서는 좋지 않음



### 리뷰하기

- 스프링을 사용해서 실제 비지니스 로직에만 집중할 수 있게 함
- web과 thymeleaf 의존성을 선언하면 부트에서 일어나는 일들
  - 스프링 mvc를 활성화하기 위해 스프링 애플리케이션 컨텍스트에 관련된 빈들을 구성함
  - 내장된 톰캣 서브를 스프링 애플리케이션 컨텍스트에 구성함
  - thymeleaf 뷰 리졸버를 구성함

## 1.4 스프링 살펴보기

### 핵심 스프링 프레임 워크

### 스프링 부트

- 액추에이터는 애플리케이션의 내부 작동을 런타임 시에 살펴볼 수 있는 기능을 제공하고 메트릭, 스레드 덤프 정보, 애플리케이션의 상태, 애플리케이션에서 사용할 수 있는 환경 속성 포함 제공
- 환경 속성의 명세 제공
- 핵심 프레임워크에 추가되는 테스트 지원 제공
- 스프링 부트 cli도 제공함 이걸 사용하면 애플리케이션 전체를 그루비 스크립트들로 작성해서 명령행에서 실행 가능

### 스프링 데이터

- 다양한 dbms 사용 가능

### 스프링 시큐리티

### 스프링 통합과 배치

### 스프링 클라우드

## 요약

- 웹 애플리케이션 생성, 데이터베이스 사용, 애플리케이션 보안, 마이크로서비스 등에서 개발자의 노력을 덜어주는 것이 스프링의 목표
- 스프링 부트는 손쉬운 의존성 관리, 자동-구성, 런타임 시의 애플리케이션 내부 작동 파악을 스프링에서 할 수 있게 함
- 스프링 애플리케이션은 스프링 Initializr를 사용해서 초기 설정 가능 스프링 Initializr는 웹을 기반으로 하며 대부분 자바 개발 환경을 지원함
- 빈이라고 하는 컴포넌트는 스프링 애플리케이션 컨텍스트에서 자바나 xml로 선언할 수 있으며, 컴포넌트 탐색으로 찾거나 스프링 부트 자동- 구성에서 자동으로 구성할 수도 있음



# #2 웹 애플리케이션 개발하기

- @CreditCardNumber는 Luhn 알고리즘 검사에 합격한 유효한 신용카드 번호를 validate 해줌

## 요약

- 스프링은 스프링 MVC 라는 강력한 웹 프레임워크를 제공하는데, 스프링 MVC는 스프링 애플리케이션의 웹 프론트엔드 개발에 사용함
- 스프링 MVC는 애노테이션을 기반으로 하며, @RequestMapping, @GetMapping, @PostMapping과 같은 애노테이션을 사용해서 요청 처리 메서드를 선언할 수 있음
- 대부분의 요청 처리 메서드들은 마지막에 Thymeleaf 템플릿과 같은 논리 뷰 이름을 반환함. 모데이터와 함께 해당 요청을 전달하기 위함임
- 스프링 MVC는 자바 빈 유효성 검사 api와 Hibernamte Validator 등의 유효성 검사 api 구현 컴포넌트를 통해 유효성 검사를 지원함
- 모델 데이터가 없거나 처리할 필요가 없는 HTTP GET 요청을 처리할 때는 뷰 컨트롤러를 사용할 수 있음
- Thymeleaf에 추가하여 스프링은 다양한 뷰 템플릿을 지원함





# #3 데이터로 작업하기

## JDBC를 사용해서 데이터 읽고 쓰기

- 스프링 JDBC 지원은 JdbcTemplate 클래스에 기반을 둠모든 형식적이고 상투적인 코드 없이 개발자가 rdb에 대한 sql 연산을 수행할 수 있는 방법을 제공함
- jdbctemplate.update()는 upsert 가능
- 

### 









