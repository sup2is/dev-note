



# 리팩토링









# #1 맛보기 예제



## 원래의 프로그램

- 예제는 비디오 대여점에서 고객의 대여료 내역을 계산하고 출력하는 간단한 프로그램
- 프로그램이 당장은 문제가 없을지 몰라도 나중엔 사용자가 요구한 기능을 수정하기 힘들어서 애먹을 수 있다. 이 상황이 바로 리팩토링 해야 하는 시점이다.
- 프로그램에 기능을 추가해야 하는데 코드 구조가 조잡해서 그 기능을 추가하기 힘들다면, 우선 리팩토링을 실시해서 기능을 추가하기 쉽게 만든 후 그 기능을 추가하자.



## 리팩토링 첫 단계

- 리팩토링할 코드 부분에 대한 신뢰도 높은 각종 테스트를 작성한다.
- 적절한 테스트코드를 작성하는 것은 리팩토링의 기본이다.



## statement 메서드 분해와 기능 재분재

## 가격 책정 부분의 조건문을 재정의로 교체

## 고찰

- 가장 중요한 교훈은 '간단한 수정 -> 테스트'를 리듬처럼 반복하는 것이다. 이 리듬을 지킬 때만이 리팩토링을 빠르고 안정적으로 완료할 수 있다.