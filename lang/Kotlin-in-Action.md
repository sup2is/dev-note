





# Kotlin in Action





# #1 코틀린이란 무엇이며 왜 필요한가?



## 코틀린 맛보기

```kotlin
data class Person(val name: String, val age: Int? = null)

fun main(args:Array<String>) {
    val persons = listOf(Person("영희"), Person("영희", age = 29))

    val oldest = persons.maxBy { it.age ?: 0 }
    println("나이가 가장 많은 사람: $oldest")
}
```



## 코틀린 주요 특성

- 코틀린의 주 목적은 현재 자바가 사용되고 있는 모든 용도에 적합하면서도 더 간결하고 생산적이며 안전한 대체 언어를 제공하는 것이다.

  

  

### 대상 플랫폼: 서버, 안드로이드 등 자바가 실행되는 모든 곳

- 일반적으로 코틀린을 활용할 수 있는 곳
  - 서버상의 코드
  - 안드로이드 디바이스에서 실행되는 모바일 애플리케이션

### 정적 타입 지정 언어

- 코틀린은 정적 타입 지정 언어다.
- 정적 타입 지정이라는 말은 모든 프로그램 구성 요소의 타입을 컴파일 시점에 알 수 있고 프로그램 안에서 객체의 필드나 메서드를 사용할 때마다 컴팡일러가 타입을 검증해준다는 뜻이다.
- 동적 타입 언어는 유연하지만 컴파일시점에 오류를 거르지 못하고 실행 시점에 오류가 발생한다.
- 코틀린에서는 모든 변수의 타입을 프로그래머가 직접 명시할 필요가 없다.

```kotlin
var x = 1
```

- 컴파일러가 문맥을 고려해 변수 타입을 결정하는 이런 기능을 타입 추론이라고 부른다.
- 정적 타입 지정의 장점
  - 성능: 실행 시점에 어떤 메서드를 호출할지 알아느낸 과정이 필요 없으므로 메서드 호출이 더 빠르다.
  - 신뢰성: 컴파일러가 프로그램의 정확성을 검증하기 때문에 실행 시 프로그램이 오류로 중단될 가능성이 더 적어진다.
  - 유지 보수성: 코드에서 다루는 객체가 어떤 타입에 속하는지 알 수 있기 때문에 처음 보는 코드를 다룰 때도 더 쉽다.
  - 도구 지원: 정적 타입 지정을 활용하면 더 안전하게 리팩토링 할 수 있고, 도구는 더 정확한 코드 완성 기능을 제공할 수 있으며, IDE의 다른 지원 기능도 더 잘 만들 수 있다.
- 코틀린은 널이 될 수 있는 타입을 지원한다. 널이 될 수 있는 타입을 지원함에 따라 컴파일 시점에 널 포인터 예외가 발생할 수 있는지 여부를 검사할 수 있어서 좀 더 프로그램의 신뢰성을 높일 수 있다.



### 함수형 프로그래밍과 객체지향 프로그래밍

- 함수형 프로그래밍의 핵심 개념
  - 일급 시민인 함수: 함수를 일반 값처럼 다룰 수 있다. 함수를 변수에 저장할 수 있고, 함수를 인자로 다른 함수에 전달할 수 있고 함수에서 새로운 함수를 만들어서 반환할 수 있다.
  - 불변성: 함수형 프로그래밍에서는 일단 만들어지고 나면 내부 상태가 절대로 바뀌지 않는 불변 객체를 사용해 프로그램을 작성한다.
  - 부수 효과 없음: 함수형 프로그래밍에서는 입력이 같으면 항상 같은 출력을 내놓고 다른 객체의 상태를 변경하지 않으며 함수 외부나 다른 바깥 환경과 상호작용하지 않는 순수 함수를 사용한다.
- 함수형 프로그래밍은 간결하고 멀티 스레드에도 안전하다. 테스트하기도 쉽다.
- 일반적으로 언어에 함수형을 사용하는 제약은 없지만 모든 언어가 함수형 프로그래밍을 편하게 사용하기에 충분한 라이브러리와 문법을 지원하지 않는다. 코틀린은 함수형 프로그래밍을 풍부하게 지원한다.
  - 함수 타입을 지원함에 따라 어떤 함수가 다른 함수를 파라미터로 받거나 함수가 새로운 함수를 반환할 수 있다.
  - 람다 식을 지원함에 따라 번거로운 준비 코드를 작성하지 않아도 코드 블록을 쉽게 정의하고 여기저기 전달할 수 있다.
  - 데이터 클래스는 불변적인 값 객체를 간편하게 만들 수 있는 구문을 제공한다.
  - 코틀린 표준 라이브러리는 객체와 컬렉션을 함수형 스타일로 다룰 수 있는 API를 제공한다.
- 코틀린으로 코드를 작성할 때는 객체지향과 함수형 접근 방법을 함께 조합해서 문제에 가장 적합한 도구를 사용하면 된다.



### 무료 오픈소스

## 코틀린 응용

### 코틀린 서버 프로그래밍

### 코틀린 안드로이드 프로그래밍

## 코틀린의 철학

### 실용성

- 코틀린은 실제 문제를 해결하기 위해 만들어진 실용적인 언어다.

### 간결성

- 코드가 더 간단하고 간결할수록 내용을 파악하기 쉽다.
- 코틀린은 프로그래머가 작성하는 코드에서 의미가 없는 부분을 줄이고 언어가 요구하는 구조를 만족시키기 위해 별 뜻은 없지만 프로그램에 꼭 넣어야하는 부수적인 요소를 줄이기 위해 많은 노력을 기울였다. ex getter, setter ... 

### 안전성

- 어떤 언어도 발생할 수 있는 모든 오류를 막을 수 없다.
- 더 큰 안전성을 얻기 위해서는 프로그램에 더 많은 정보를 덧붙여야 하므로 생산성이 하락한다. 안정성과 생산성 사이에는 트레이드 오프가 존재한다.
- 코틀린을 만들면서 자바보다 더 높은 수준의 안전성을 달성하되 전체 비용은 더 적게 지불하도록 설계했다.

### 상호운용성

- 자바의 라이브러리, 애너테이션, 인터페이스 등등 모두 코틀린 코드에 적용하는 일이 가능하다.
- 자바와 코틀린 소스 파일을 자유롭게 내비게이션 할 수 있고 자바 메서드를 리팩토링해도 그 메서드와 관련 있는 코틀린 코드까지 변경된다.



## 코틀린 도구 사용

### 코틀린 코드 컴파일

- 코틀린 소스코드는 보통 .kt 라는 확장자를 파일에 붙인다.
- 컴파일되면 .class 파일을 만들어낸다.
- 코틀린 컴파일러로 컴파일한 코드는 코틀린 런타임 라이브러리에 의존한다.
- 런타임 라이브러리는 코틀린 자체 표준 라이브러리 클래스와 코틀린에서 자바 API의 기능을 확장한 내용이 들어 있다. 
- 코틀린으로 컴파일한 애플리케이션을 배포할때는 런타임 라이브러리도 함께 배포해야 한다.
- 코틀린은 maven, gradle, ant 등의 빌드 시스템과 호환된다.
- maven과 gradle은 애플리케이션을 패키지할 때 알아서 코틀린 런타임을 포함시켜준다.



### 인텔리J IDEA와 안드로이드 스튜디오의 코틀린 플러그인

### 대화형 셸

### 이클립스 플러그인

### 온라인 놀이터

### 자바-코틀린 변환기

## 요약

- 코틀린은 타입 추론을 지원하는 정적 타입 지정 언어다. 따라서 소스코드의 정확성과 성능을 보장하면서도 소스코드를 간결하게 유지할 수 있다.
- 코틀린은 객체지향과 함수형 프로그래밍 스타일을 모두 지원한다. 코틀린에서는 일급 시민 함수를 사용해 수준 높은 추상화가 가능하고 불변 값 지원을 통해 멀티 스레드 애플리케이션 개발과 테스트를 더 쉽게 할 수 있다.
- 코틀린을 서버 애플리케이션 개발에 잘 활용할 수 있다. 코틀린은 기존 자바 프레임워크를 완벽하게 지원하는 한편, HTML 생성기나 영속화등의 일반적인 작업을 위한 새로운 도구를 제공한다.
- 코틀린을 안드로이드에도 활용할 수 있다.
- 코틀린은 오픈소스다. 또한 주요 IDE와 빌드 시스템을 완전히 지원한다.
- 코틀린은 실용적이며 안전하고 간결하며 상호운용성이 좋다. 이는 코틀린을 설계하면서 일반적인 작업에 대해 이미 잘 알려진 해법을 채택하고 NullPointerException과 같이 흔히 발생하는 오류를 방지하며 읽기 쉽고 간결한 코드를 지원하면서 자바와 아무런 제약 없이 통합될 수 있는 언어를 만드는 데 초점을 맞췄다는 뜻이다.



